<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title ? `${title} - ` : '' %>小姨子的诱惑</title>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="stylesheet" href="/css/tailwind.min.css">
  <style nonce="<%= nonce %>">
    *{font-family:'Noto Sans SC',system-ui,-apple-system,sans-serif}
    body{background:#0c0a0f;min-height:100vh;position:relative;overflow-x:hidden}
    body::before{content:'';position:fixed;top:-30%;left:-20%;width:70vw;height:70vw;border-radius:50%;background:radial-gradient(circle,rgba(244,63,94,0.12) 0%,transparent 70%);pointer-events:none}
    body::after{content:'';position:fixed;bottom:-20%;right:-15%;width:60vw;height:60vw;border-radius:50%;background:radial-gradient(circle,rgba(251,146,60,0.08) 0%,transparent 70%);pointer-events:none}
    .glass{background:rgba(255,255,255,0.03);backdrop-filter:blur(16px);border:1px solid rgba(255,255,255,0.05);box-shadow:0 8px 32px rgba(0,0,0,0.3),inset 0 1px 0 rgba(255,255,255,0.04)}
    .glass:hover{background:rgba(255,255,255,0.055);border-color:rgba(255,255,255,0.08)}
    .glass-solid{background:rgba(255,255,255,0.05);backdrop-filter:blur(24px);border:1px solid rgba(255,255,255,0.07);box-shadow:0 4px 24px rgba(0,0,0,0.4)}
    .glow{box-shadow:0 0 40px rgba(244,63,94,0.12),0 8px 32px rgba(0,0,0,0.3)}
    .toast-container{position:fixed;top:1.5rem;right:1.5rem;z-index:9999;display:flex;flex-direction:column;gap:0.5rem;pointer-events:none}
    .toast{padding:.75rem 1.5rem;border-radius:1rem;color:#fff;font-size:.875rem;opacity:0;transform:translateY(-10px);transition:all .3s;pointer-events:none;backdrop-filter:blur(20px);background:rgba(34,197,94,0.85);box-shadow:0 4px 20px rgba(34,197,94,0.3);max-width:360px;word-break:break-word}
    .toast.toast-error{background:rgba(239,68,68,0.85);box-shadow:0 4px 20px rgba(239,68,68,0.3)}
    .toast.toast-warning{background:rgba(245,158,11,0.85);box-shadow:0 4px 20px rgba(245,158,11,0.3)}
    .toast.toast-info{background:rgba(59,130,246,0.85);box-shadow:0 4px 20px rgba(59,130,246,0.3)}
    .toast.show{opacity:1;transform:translateY(0)}
    .btn-loading{position:relative;pointer-events:none;opacity:0.7}
    .btn-loading::after{content:'';position:absolute;right:8px;top:50%;width:14px;height:14px;margin-top:-7px;border:2px solid rgba(255,255,255,0.3);border-top-color:#fff;border-radius:50%;animation:spin .6s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    @media(max-width:640px){.vless-link{font-size:10px;word-break:break-all;line-height:1.4}.node-card-grid{grid-template-columns:1fr !important}}
    .scrollbar-hide::-webkit-scrollbar{display:none}.scrollbar-hide{-ms-overflow-style:none;scrollbar-width:none}
    .stat-card{position:relative;overflow:hidden}
    .stat-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--accent-color),transparent);opacity:.8}
    .stat-card::after{content:'';position:absolute;top:0;left:0;right:0;height:40px;background:linear-gradient(180deg,color-mix(in srgb,var(--accent-color) 6%,transparent),transparent);pointer-events:none}
    input,select,textarea{transition:all .2s}
    select,select option{background:#1a1520;color:#d1d5db}
    input:focus,select:focus,textarea:focus{border-color:rgba(244,63,94,0.5) !important;outline:none;box-shadow:0 0 0 3px rgba(244,63,94,0.1),0 0 20px rgba(244,63,94,0.05)}
    ::-webkit-scrollbar{width:5px}
    ::-webkit-scrollbar-track{background:transparent}
    ::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.08);border-radius:10px}
    ::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,0.15)}
    .tab-btn{position:relative}
    .tab-btn.active::after{content:'';position:absolute;bottom:-1px;left:20%;right:20%;height:2px;background:linear-gradient(90deg,transparent,#f43f5e,transparent);border-radius:1px}
    table tbody tr{transition:background .15s}
    ::selection{background:rgba(244,63,94,0.25)}
    @keyframes marquee { 0%{transform:translateX(100%)} 100%{transform:translateX(-100%)} }
    .marquee-wrap { overflow:hidden; flex:1; }
    .marquee-wrap:hover .animate-marquee { animation-play-state:paused; }
    .animate-marquee { display:inline-block; animation: marquee 20s linear infinite; white-space:nowrap; }
  </style>
</head>
<body>
<!-- 全局自定义弹窗 -->
<div id="modal-overlay" class="fixed inset-0 z-[999] hidden items-center justify-center bg-black/60 backdrop-blur-sm" style="display:none">
  <div class="bg-[#1a1520] border border-white/10 rounded-2xl p-6 max-w-sm w-full mx-4 shadow-2xl">
    <p id="modal-msg" class="text-gray-200 text-sm mb-5 text-center"></p>
    <div id="modal-input-wrap" class="mb-4 hidden">
      <input id="modal-input" class="w-full bg-black/30 text-white px-4 py-2.5 rounded-xl border border-white/10 text-sm text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none" autocomplete="off">
      <p id="modal-hint" class="text-gray-600 text-[11px] mt-2 text-center"></p>
    </div>
    <div id="modal-btns" class="flex gap-3 justify-center"></div>
  </div>
</div>
<script nonce="<%= nonce %>">
function _showModal(msg, showCancel, inputOpts) {
  return new Promise(resolve => {
    const o = document.getElementById('modal-overlay');
    document.getElementById('modal-msg').textContent = msg;
    const inputWrap = document.getElementById('modal-input-wrap');
    const input = document.getElementById('modal-input');
    const hint = document.getElementById('modal-hint');
    if (inputOpts) {
      inputWrap.classList.remove('hidden');
      input.value = inputOpts.value || '';
      input.placeholder = inputOpts.placeholder || '';
      hint.textContent = inputOpts.hint || '';
      hint.classList.toggle('hidden', !inputOpts.hint);
    } else {
      inputWrap.classList.add('hidden');
    }
    const btns = document.getElementById('modal-btns');
    btns.innerHTML = '';
    const close = (val) => { o.style.display='none'; inputWrap.classList.add('hidden'); resolve(val); };
    if (showCancel) {
      const cb = document.createElement('button');
      cb.textContent = '取消';
      cb.className = 'flex-1 py-2 rounded-xl text-sm text-gray-400 border border-white/10 hover:bg-white/5 transition';
      cb.onclick = () => close(inputOpts ? null : false);
      btns.appendChild(cb);
    }
    const ob = document.createElement('button');
    ob.textContent = '确定';
    ob.className = 'flex-1 py-2 rounded-xl text-sm text-white bg-rose-600 hover:bg-rose-500 transition';
    ob.onclick = () => close(inputOpts ? input.value : true);
    btns.appendChild(ob);
    o.style.display = 'flex';
    if (inputOpts) { input.focus(); input.select(); input.onkeydown = (e) => { if(e.key==='Enter') ob.click(); }; }
    else ob.focus();
  });
}
window._confirm = (msg) => _showModal(msg, true);
window._alert = (msg) => _showModal(msg, false);
window._prompt = (msg, opts) => _showModal(msg, true, opts || {});
</script>
